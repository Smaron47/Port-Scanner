# Port-Scanner
**Low-Level Port Scanner & Remote Shell Client**

---

## Table of Contents

1. Project Overview
2. Features
3. Technology Stack & Module Explanations
4. File Structure
5. Environment Setup
6. Usage Instructions
7. Functionality Breakdown

   * 7.1 `transfer(s, path)`
   * 7.2 `scanner(s, ip, ports)`
   * 7.3 `connect()`
8. Security Considerations
9. Error Handling & Edge Cases
10. Extension Ideas
11. Keywords

---

## 1. Project Overview

This Python script implements a **low-level port scanner** and a **reverse shell client** designed for offensive penetration testing scenarios. When executed on a target machine, it connects back to an attacker's server, receives commands, executes them locally, and returns the output. Special commands include file transfer and port scanning.

**Author:** Smaron Biswas

---

## 2. Features

* **Remote Command Execution:** Executes arbitrary shell commands received from the server.
* **Port Scanning:** Checks specified ports on a given IP and reports open/closed status.
* **File Transfer:** Sends files from the target system to the server.
* **Persistent Connection:** Maintains a TCP connection to listen for commands until 'terminate' is received.

---

## 3. Technology Stack & Module Explanations

* **`socket`**: Core Python library for creating TCP connections.
* **`subprocess`**: Spawns shell processes to execute system commands and captures stdout/stderr.
* **`os`**: Interacts with the file system to check existence and open files.

---

## 4. File Structure

```plaintext
low_level_scanner/
└── client.py    # Main Python script implementing the reverse shell and scanner
```

---

## 5. Environment Setup

1. **Python 2.7+ or 3.x** installed on the target machine.
2. Ensure inbound firewall rules allow outbound TCP to `ATTACKER_IP:PORT` (default `10.0.2.15:8080`).
3. Modify `s.connect((...))` in `connect()` to match the attacker's listener address.

---

## 6. Usage Instructions

1. Start a TCP listener on the attacker's machine (e.g., `nc -lvp 8080`).
2. Deploy and run `client.py` on the target:

   ```bash
   python client.py
   ```
3. The client will connect back and await commands.
4. Supported commands:

   * **Shell commands:** Any shell command (e.g., `id`, `ls -la`).
   * **scan**: `scan IP:port1,port2,...` – Scans listed ports.
   * **grab**: `grab*<file_path>` – Transfers specified file.
   * **terminate**: Closes connection and exits.

---

## 7. Functionality Breakdown

### 7.1 `transfer(s, path)`

* **Purpose**: Reads a file in 1KB chunks and sends it over the socket, ending with a 'DONE' marker.
* **Flow**:

  1. Check if `path` exists.
  2. Open file in binary mode.
  3. Loop: Read 1024 bytes, send via `s.send()`.
  4. After EOF, send `'DONE'` and close file.
  5. If missing, send error message.

### 7.2 `scanner(s, ip, ports)`

* **Purpose**: Performs a TCP connect scan on the specified IP and ports.
* **Flow**:

  1. Split comma-separated `ports`.
  2. For each port:

     * Create a socket.
     * Use `connect_ex` to test connectivity (0 = open).
     * Append result to `scan_result` string.
     * Close socket.
  3. Send aggregated results back via `s.send()`.

### 7.3 `connect()`

* **Purpose**: Establishes reverse shell connection and processes commands.
* **Flow**:

  1. Create and connect socket to attacker IP/port.
  2. Loop forever:

     * `recv` command.
     * If `'terminate'`, break and close.
     * If starts with `'grab*'`, call `transfer()`.
     * If starts with `'scan '`, parse `IP:ports` and call `scanner()`.
     * Else, execute using `subprocess.Popen()` and send stdout & stderr.

---

## 8. Security Considerations

* This script is for **authorized penetration testing only**.
* Running on an unpatched system can expose sensitive data.
* Ensure listener is protected and monitored.
* Implement encryption (e.g., TLS) for real-world deployments.

---

## 9. Error Handling & Edge Cases

* **Exceptions** in scanning and transfer are caught silently.
* **Empty commands**: If `recv` returns empty, client may hang.
* **Large files**: May require flow control beyond simple chunking.

---

## 10. Extension Ideas

* Add **authentication** before executing commands.
* Implement **AES encryption** for socket data.
* Expand scanner to **UDP** and **service fingerprinting**.
* Support **directory traversal** for grabbing multiple files.
* Integrate with a **command-and-control** framework.

---

## 11. Keywords

```
reverse shell python
socket reverse shell
python port scanner
offensive pentest tool
file transfer socket
tcp connect scan
subprocess command execution
pentesting python script
```

---

*Documentation generated by Smaron Biswas – 2022*
